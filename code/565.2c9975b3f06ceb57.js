"use strict";(self.webpackChunkrams_tools=self.webpackChunkrams_tools||[]).push([[565],{8565:(y,b,g)=>{g.r(b),g.d(b,{DigitalSignatureComponent:()=>F});var u=g(2200),l=g(4341),t=g(3664),i=g(2615);const C=["signatureCanvas"];function S(c,d){if(1&c){const n=t.RV6();t.j41(0,"div",12)(1,"div",48)(2,"label",14),t.EFF(3,"Width:"),t.k0s(),t.j41(4,"input",49),t.mxI("ngModelChange",function(e){i.eBV(n);const s=t.XpG();return t.DH7(s.customWidth,e)||(s.customWidth=e),i.Njj(e)}),t.bIt("change",function(){i.eBV(n);const e=t.XpG();return i.Njj(e.resizeCanvas())}),t.k0s()(),t.j41(5,"div",48)(6,"label",14),t.EFF(7,"Height:"),t.k0s(),t.j41(8,"input",50),t.mxI("ngModelChange",function(e){i.eBV(n);const s=t.XpG();return t.DH7(s.customHeight,e)||(s.customHeight=e),i.Njj(e)}),t.bIt("change",function(){i.eBV(n);const e=t.XpG();return i.Njj(e.resizeCanvas())}),t.k0s()()()}if(2&c){const n=t.XpG();t.R7$(4),t.R50("ngModel",n.customWidth),t.R7$(4),t.R50("ngModel",n.customHeight)}}function k(c,d){1&c&&(t.j41(0,"div",51)(1,"div",52),t.nrm(2,"i",53),t.j41(3,"p"),t.EFF(4,"Click and drag to draw your signature"),t.k0s(),t.j41(5,"small",6),t.EFF(6,"Use mouse or touch to draw"),t.k0s()()())}function w(c,d){if(1&c){const n=t.RV6();t.j41(0,"div",57),t.nrm(1,"img",58),t.j41(2,"div",59)(3,"button",60),t.bIt("click",function(){const e=i.eBV(n).$implicit,s=t.XpG(2);return i.Njj(s.downloadSavedSignature(e))}),t.nrm(4,"i",61),t.k0s(),t.j41(5,"button",62),t.bIt("click",function(){const e=i.eBV(n).$implicit,s=t.XpG(2);return i.Njj(s.loadSignature(e))}),t.nrm(6,"i",63),t.k0s(),t.j41(7,"button",64),t.bIt("click",function(){const e=i.eBV(n).index,s=t.XpG(2);return i.Njj(s.deleteSavedSignature(e))}),t.nrm(8,"i",65),t.k0s()(),t.j41(9,"div",66)(10,"small",6),t.EFF(11),t.nI1(12,"date"),t.k0s()()()}if(2&c){const n=d.$implicit,a=d.index;t.R7$(),t.Y8G("src",n.dataUrl,t.B4B)("alt","Signature "+(a+1)),t.R7$(10),t.JRh(t.i5U(12,3,n.timestamp,"short"))}}function D(c,d){if(1&c&&(t.j41(0,"div",44)(1,"div",8)(2,"h5",9),t.nrm(3,"i",54),t.EFF(4," Saved Signatures "),t.k0s()(),t.j41(5,"div",11)(6,"div",55),t.DNE(7,w,13,6,"div",56),t.k0s()()()),2&c){const n=t.XpG();t.R7$(7),t.Y8G("ngForOf",n.savedSignatures)}}function j(c,d){if(1&c&&(t.j41(0,"div",67),t.nrm(1,"i",68),t.EFF(2),t.k0s()),2&c){const n=t.XpG();t.R7$(2),t.SpI(" ",n.successMessage," ")}}let F=(()=>{class c{constructor(){this.isDrawing=!1,this.lastX=0,this.lastY=0,this.penColor="#000000",this.penSize=3,this.canvasSize="medium",this.backgroundColor="white",this.customWidth=600,this.customHeight=300,this.hasDrawing=!1,this.undoStack=[],this.redoStack=[],this.savedSignatures=[],this.successMessage=""}ngAfterViewInit(){this.canvas=this.canvasRef.nativeElement,this.ctx=this.canvas.getContext("2d"),this.initializeCanvas(),this.loadSavedSignatures()}initializeCanvas(){this.resizeCanvas(),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.updatePenSize(),this.setBackgroundColor()}resizeCanvas(){const a={small:{width:400,height:200},medium:{width:600,height:300},large:{width:800,height:400},custom:{width:this.customWidth,height:this.customHeight}}[this.canvasSize];this.canvas.width=a.width,this.canvas.height=a.height,this.initializeCanvas()}updatePenSize(){this.ctx.lineWidth=this.penSize}setBackgroundColor(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),"transparent"!==this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height))}startDrawing(n){this.isDrawing=!0,this.saveState();const a=this.getEventPoint(n);this.lastX=a.x,this.lastY=a.y,this.ctx.strokeStyle=this.penColor,this.ctx.beginPath(),this.ctx.moveTo(this.lastX,this.lastY),n.preventDefault()}draw(n){if(!this.isDrawing)return;const a=this.getEventPoint(n);this.ctx.strokeStyle=this.penColor,this.ctx.beginPath(),this.ctx.moveTo(this.lastX,this.lastY),this.ctx.lineTo(a.x,a.y),this.ctx.stroke(),this.lastX=a.x,this.lastY=a.y,this.hasDrawing=!0,n.preventDefault()}stopDrawing(){this.isDrawing&&(this.isDrawing=!1,this.redoStack=[])}getEventPoint(n){const a=this.canvas.getBoundingClientRect();let e,s;return n instanceof MouseEvent?(e=n.clientX,s=n.clientY):(e=n.touches[0].clientX,s=n.touches[0].clientY),{x:e-a.left,y:s-a.top}}saveState(){const n=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.undoStack.push(n),this.undoStack.length>20&&this.undoStack.shift()}undo(){if(this.undoStack.length>0){const n=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.redoStack.push(n);const a=this.undoStack.pop();this.ctx.putImageData(a,0,0),this.hasDrawing=this.checkHasDrawing()}}redo(){if(this.redoStack.length>0){const n=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.undoStack.push(n);const a=this.redoStack.pop();this.ctx.putImageData(a,0,0),this.hasDrawing=this.checkHasDrawing()}}clearCanvas(){this.saveState(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.setBackgroundColor(),this.hasDrawing=!1,this.redoStack=[]}checkHasDrawing(){return this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height).data.some(a=>0!==a)}downloadSignature(){if(!this.hasDrawing)return;const n=document.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height;const a=n.getContext("2d"),e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);if("white"===this.backgroundColor){const r=e.data;for(let o=0;o<r.length;o+=4)r[o]>250&&r[o+1]>250&&r[o+2]>250&&(this.hasNearbyDrawing(e,o/4,this.canvas.width,this.canvas.height)||(r[o+3]=0))}a.putImageData(e,0,0);const s=document.createElement("a");s.download=`signature-${(new Date).getTime()}.png`,s.href=n.toDataURL("image/png"),s.click(),this.showSuccess("Signature downloaded successfully!")}downloadSignatureWithWhiteBG(){if(!this.hasDrawing)return;const n=document.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height;const a=n.getContext("2d");a.fillStyle="white",a.fillRect(0,0,n.width,n.height),a.drawImage(this.canvas,0,0);const e=document.createElement("a");e.download=`signature-white-bg-${(new Date).getTime()}.png`,e.href=n.toDataURL("image/png"),e.click(),this.showSuccess("Signature with white background downloaded successfully!")}hasNearbyDrawing(n,a,e,s){const r=n.data,o=a%e,h=Math.floor(a/e);for(let m=-2;m<=2;m++)for(let v=-2;v<=2;v++){const p=o+v,_=h+m;if(p>=0&&p<e&&_>=0&&_<s){const f=4*(_*e+p);if(r[f]<250||r[f+1]<250||r[f+2]<250)return!0}}return!1}saveToGallery(){if(!this.hasDrawing)return;const n=document.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height;const a=n.getContext("2d"),e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);if("white"===this.backgroundColor){const r=e.data;for(let o=0;o<r.length;o+=4)r[o]>250&&r[o+1]>250&&r[o+2]>250&&(this.hasNearbyDrawing(e,o/4,this.canvas.width,this.canvas.height)||(r[o+3]=0))}a.putImageData(e,0,0);const s={dataUrl:n.toDataURL("image/png"),timestamp:new Date,width:this.canvas.width,height:this.canvas.height};this.savedSignatures.push(s),this.saveSavedSignatures(),this.showSuccess("Signature saved to gallery!")}loadSignature(n){const a=new Image;a.onload=()=>{this.clearCanvas(),this.ctx.drawImage(a,0,0),this.hasDrawing=!0},a.src=n.dataUrl}downloadSavedSignature(n){const a=document.createElement("a");a.download=`saved-signature-${new Date(n.timestamp).getTime()}.png`,a.href=n.dataUrl,a.click(),this.showSuccess("Saved signature downloaded!")}deleteSavedSignature(n){this.savedSignatures.splice(n,1),this.saveSavedSignatures(),this.showSuccess("Signature deleted from gallery!")}loadSavedSignatures(){const n=localStorage.getItem("digitalSignatures");n&&(this.savedSignatures=JSON.parse(n))}saveSavedSignatures(){localStorage.setItem("digitalSignatures",JSON.stringify(this.savedSignatures))}showSuccess(n){this.successMessage=n,setTimeout(()=>this.successMessage="",3e3)}static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["app-digital-signature"]],viewQuery:function(a,e){if(1&a&&t.GBs(C,7),2&a){let s;t.mGM(s=t.lsd())&&(e.canvasRef=s.first)}},decls:110,vars:20,consts:[["signatureCanvas",""],[1,"container"],[1,"tool-container"],[1,"text-center","mb-4"],[1,"fas","fa-signature","tool-header-icon"],[1,"mt-3"],[1,"text-muted"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"fas","fa-pen","me-2"],[1,"card-body"],[1,"row"],[1,"col-md-3","mb-3"],[1,"form-label"],["type","color","title","Choose pen color",1,"form-control","form-control-color",3,"ngModelChange","ngModel"],["type","range","min","1","max","20",1,"form-range",3,"ngModelChange","input","ngModel"],[1,"range-value"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value","small"],["value","medium"],["value","large"],["value","custom"],["value","transparent"],["value","white"],["value","lightgray"],["class","row",4,"ngIf"],[1,"action-buttons"],[1,"btn","btn-danger","me-2",3,"click"],[1,"fas","fa-eraser","me-1"],[1,"btn","btn-warning","me-2",3,"click","disabled"],[1,"fas","fa-undo","me-1"],[1,"btn","btn-info","me-2",3,"click","disabled"],[1,"fas","fa-redo","me-1"],[1,"btn","btn-success","me-2",3,"click","disabled"],[1,"fas","fa-download","me-1"],[1,"btn","btn-outline-success","me-2",3,"click","disabled"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"fas","fa-save","me-1"],[1,"fas","fa-edit","me-2"],[1,"canvas-container"],[1,"signature-canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],["class","canvas-overlay",4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],[1,"fas","fa-info-circle","me-2"],[1,"col-md-6"],["class","alert alert-success mt-3",4,"ngIf"],[1,"col-md-6","mb-3"],["type","number","min","200","max","1200","placeholder","Width in pixels",1,"form-control",3,"ngModelChange","change","ngModel"],["type","number","min","100","max","800","placeholder","Height in pixels",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"canvas-overlay"],[1,"overlay-content"],[1,"fas","fa-signature","overlay-icon"],[1,"fas","fa-images","me-2"],[1,"signature-gallery"],["class","signature-item",4,"ngFor","ngForOf"],[1,"signature-item"],[1,"signature-preview",3,"src","alt"],[1,"signature-actions"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"fas","fa-download"],[1,"btn","btn-sm","btn-outline-success","me-1",3,"click"],[1,"fas","fa-upload"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"signature-info"],[1,"alert","alert-success","mt-3"],[1,"fas","fa-check-circle","me-2"]],template:function(a,e){if(1&a){const s=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.nrm(3,"i",4),t.j41(4,"h1",5),t.EFF(5,"Digital Signature Board"),t.k0s(),t.j41(6,"p",6),t.EFF(7,"Draw your signature and download as transparent PNG"),t.k0s()(),t.j41(8,"div",7)(9,"div",8)(10,"h5",9),t.nrm(11,"i",10),t.EFF(12," Drawing Tools "),t.k0s()(),t.j41(13,"div",11)(14,"div",12)(15,"div",13)(16,"label",14),t.EFF(17,"Pen Color:"),t.k0s(),t.j41(18,"input",15),t.mxI("ngModelChange",function(o){return i.eBV(s),t.DH7(e.penColor,o)||(e.penColor=o),i.Njj(o)}),t.k0s()(),t.j41(19,"div",13)(20,"label",14),t.EFF(21,"Pen Size:"),t.k0s(),t.j41(22,"input",16),t.mxI("ngModelChange",function(o){return i.eBV(s),t.DH7(e.penSize,o)||(e.penSize=o),i.Njj(o)}),t.bIt("input",function(){return i.eBV(s),i.Njj(e.updatePenSize())}),t.k0s(),t.j41(23,"div",17),t.EFF(24),t.k0s()(),t.j41(25,"div",13)(26,"label",14),t.EFF(27,"Canvas Size:"),t.k0s(),t.j41(28,"select",18),t.mxI("ngModelChange",function(o){return i.eBV(s),t.DH7(e.canvasSize,o)||(e.canvasSize=o),i.Njj(o)}),t.bIt("change",function(){return i.eBV(s),i.Njj(e.resizeCanvas())}),t.j41(29,"option",19),t.EFF(30,"Small (400x200)"),t.k0s(),t.j41(31,"option",20),t.EFF(32,"Medium (600x300)"),t.k0s(),t.j41(33,"option",21),t.EFF(34,"Large (800x400)"),t.k0s(),t.j41(35,"option",22),t.EFF(36,"Custom"),t.k0s()()(),t.j41(37,"div",13)(38,"label",14),t.EFF(39,"Background:"),t.k0s(),t.j41(40,"select",18),t.mxI("ngModelChange",function(o){return i.eBV(s),t.DH7(e.backgroundColor,o)||(e.backgroundColor=o),i.Njj(o)}),t.bIt("change",function(){return i.eBV(s),i.Njj(e.setBackgroundColor())}),t.j41(41,"option",23),t.EFF(42,"Transparent"),t.k0s(),t.j41(43,"option",24),t.EFF(44,"White"),t.k0s(),t.j41(45,"option",25),t.EFF(46,"Light Gray"),t.k0s()()()(),t.DNE(47,S,9,2,"div",26),t.j41(48,"div",27)(49,"button",28),t.bIt("click",function(){return i.eBV(s),i.Njj(e.clearCanvas())}),t.nrm(50,"i",29),t.EFF(51," Clear "),t.k0s(),t.j41(52,"button",30),t.bIt("click",function(){return i.eBV(s),i.Njj(e.undo())}),t.nrm(53,"i",31),t.EFF(54," Undo "),t.k0s(),t.j41(55,"button",32),t.bIt("click",function(){return i.eBV(s),i.Njj(e.redo())}),t.nrm(56,"i",33),t.EFF(57," Redo "),t.k0s(),t.j41(58,"button",34),t.bIt("click",function(){return i.eBV(s),i.Njj(e.downloadSignature())}),t.nrm(59,"i",35),t.EFF(60," Download Transparent BG "),t.k0s(),t.j41(61,"button",36),t.bIt("click",function(){return i.eBV(s),i.Njj(e.downloadSignatureWithWhiteBG())}),t.nrm(62,"i",35),t.EFF(63," Download White BG "),t.k0s(),t.j41(64,"button",37),t.bIt("click",function(){return i.eBV(s),i.Njj(e.saveToGallery())}),t.nrm(65,"i",38),t.EFF(66," Save to Gallery "),t.k0s()()()(),t.j41(67,"div",7)(68,"div",8)(69,"h5",9),t.nrm(70,"i",39),t.EFF(71," Signature Canvas "),t.k0s()(),t.j41(72,"div",11)(73,"div",40)(74,"canvas",41,0),t.bIt("mousedown",function(o){return i.eBV(s),i.Njj(e.startDrawing(o))})("mousemove",function(o){return i.eBV(s),i.Njj(e.draw(o))})("mouseup",function(){return i.eBV(s),i.Njj(e.stopDrawing())})("mouseleave",function(){return i.eBV(s),i.Njj(e.stopDrawing())})("touchstart",function(o){return i.eBV(s),i.Njj(e.startDrawing(o))})("touchmove",function(o){return i.eBV(s),i.Njj(e.draw(o))})("touchend",function(){return i.eBV(s),i.Njj(e.stopDrawing())}),t.k0s(),t.DNE(76,k,7,0,"div",42),t.k0s()()(),t.DNE(77,D,8,1,"div",43),t.j41(78,"div",44)(79,"div",8)(80,"h5",9),t.nrm(81,"i",45),t.EFF(82," Instructions "),t.k0s()(),t.j41(83,"div",11)(84,"div",12)(85,"div",46)(86,"h6"),t.EFF(87,"Drawing:"),t.k0s(),t.j41(88,"ul")(89,"li"),t.EFF(90,"Use mouse or touch to draw your signature"),t.k0s(),t.j41(91,"li"),t.EFF(92,"Adjust pen color and size before drawing"),t.k0s(),t.j41(93,"li"),t.EFF(94,"Choose canvas size that suits your needs"),t.k0s(),t.j41(95,"li"),t.EFF(96,"Use transparent background for flexibility"),t.k0s()()(),t.j41(97,"div",46)(98,"h6"),t.EFF(99,"Features:"),t.k0s(),t.j41(100,"ul")(101,"li"),t.EFF(102,"Download as transparent PNG or with white background"),t.k0s(),t.j41(103,"li"),t.EFF(104,"Undo/Redo functionality"),t.k0s(),t.j41(105,"li"),t.EFF(106,"Save multiple signatures to gallery"),t.k0s(),t.j41(107,"li"),t.EFF(108,"Responsive design for all devices"),t.k0s()()()()()(),t.DNE(109,j,3,1,"div",47),t.k0s()()}2&a&&(t.R7$(18),t.R50("ngModel",e.penColor),t.R7$(4),t.R50("ngModel",e.penSize),t.R7$(2),t.SpI("",e.penSize,"px"),t.R7$(4),t.R50("ngModel",e.canvasSize),t.R7$(12),t.R50("ngModel",e.backgroundColor),t.R7$(7),t.Y8G("ngIf","custom"===e.canvasSize),t.R7$(5),t.Y8G("disabled",0===e.undoStack.length),t.R7$(3),t.Y8G("disabled",0===e.redoStack.length),t.R7$(3),t.Y8G("disabled",!e.hasDrawing),t.R7$(3),t.Y8G("disabled",!e.hasDrawing),t.R7$(3),t.Y8G("disabled",!e.hasDrawing),t.R7$(9),t.AVh("transparent-bg","transparent"===e.backgroundColor)("white-bg","white"===e.backgroundColor)("lightgray-bg","lightgray"===e.backgroundColor),t.R7$(3),t.Y8G("ngIf",!e.hasDrawing&&!e.isDrawing),t.R7$(),t.Y8G("ngIf",e.savedSignatures.length>0),t.R7$(32),t.Y8G("ngIf",e.successMessage))},dependencies:[u.MD,u.Sq,u.bT,l.YN,l.xH,l.y7,l.me,l.Q0,l.MR,l.wz,l.BC,l.VZ,l.zX,l.vS,u.vh],styles:[".form-control-color[_ngcontent-%COMP%]{width:50px;height:38px;border-radius:var(--border-radius);border:1px solid var(--vscode-border);padding:0;cursor:pointer}.form-range[_ngcontent-%COMP%]{width:100%}.range-value[_ngcontent-%COMP%]{text-align:center;font-size:.8rem;color:var(--vscode-text-secondary);margin-top:.25rem}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:1rem}.canvas-container[_ngcontent-%COMP%]{position:relative;display:inline-block;border:2px solid var(--vscode-border);border-radius:var(--border-radius)}.canvas-container.transparent-bg[_ngcontent-%COMP%]{background:repeating-conic-gradient(#f0f0f0 0% 25%,transparent 0% 50%) 50% / 10px 10px}.canvas-container.white-bg[_ngcontent-%COMP%]{background:#fff}.canvas-container.lightgray-bg[_ngcontent-%COMP%]{background:#d3d3d3}.signature-canvas[_ngcontent-%COMP%]{display:block;cursor:crosshair;background:transparent;border-radius:var(--border-radius)}.signature-canvas[_ngcontent-%COMP%]:hover{cursor:crosshair}.canvas-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;background:#fffc;border-radius:var(--border-radius)}.overlay-content[_ngcontent-%COMP%]{text-align:center;color:var(--vscode-text-secondary)}.overlay-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:var(--vscode-text-muted)}.signature-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem}.signature-item[_ngcontent-%COMP%]{background:var(--vscode-editor-bg);border:1px solid var(--vscode-border);border-radius:var(--border-radius);padding:1rem;text-align:center;transition:all .3s ease}.signature-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--box-shadow)}.signature-preview[_ngcontent-%COMP%]{max-width:100%;max-height:100px;border:1px solid var(--vscode-border);border-radius:var(--border-radius);background:repeating-conic-gradient(#f0f0f0 0% 25%,transparent 0% 50%) 50% / 10px 10px}.signature-actions[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;justify-content:center;gap:.25rem}.signature-info[_ngcontent-%COMP%]{margin-top:.5rem}.card-header[_ngcontent-%COMP%]{background-color:var(--vscode-sidebar-bg);border-bottom:1px solid var(--vscode-border)}.card-body[_ngcontent-%COMP%]{background-color:var(--vscode-editor-bg)}.alert-success[_ngcontent-%COMP%]{background-color:#89d1851a;border-color:var(--vscode-green);color:var(--vscode-green)}@media (max-width: 768px){.signature-canvas[_ngcontent-%COMP%]{max-width:100%;height:auto}.canvas-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.action-buttons[_ngcontent-%COMP%]{justify-content:center}.signature-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}}"]})}return c})()}}]);