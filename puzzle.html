<html>

<head>
  <style>
    input,
    textarea {
      display: block;
      width: 100%;
    }

    textarea {
      height: 30%;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>

</head>

<body>
  <input type="url" name="datasource" id="datasource" value="https://cors-anywhere.herokuapp.com/http://s3-ap-southeast-1.amazonaws.com/geeks.redmart.com/coding-problems/map.txt"
  />
  <button value="geturl" id="geturl">get data from url</button> <b style="display:none" id="loading"> Loading data from Ajax......</b>
  
  <textarea id="datasource-text">

  </textarea>
  <button value="calculate" id="calculate">calculate</button> You can load data from the ajax or you can paste the data in text area, click on calculate
  <div>
    <b>x:
      <span id="x" />
    </b>
    <br/>
    <b>y:
      <span id="y" />
    </b>
	
	<br/>
    <b>path:
      <span id="path" />
    </b>
		<br/>
    <b>drop:
      <span id="deep" />
    </b>
	 <b>length:
      <span id="length" />
    </b>
  </div>
  <div>

  </div>

</body>

<script type="text/javascript">
  (function () {



    var calculate = function (rawData) {

      var lines = rawData.split('\n');
      var x = lines[0].split(/\s+/)[0];
      $('#x').text(x);
      debugger;
      var y = lines[0].split(/\s+/)[1];
      $('#y').text(y);
      var arrayOfHeights = lines.splice(1, x).map(row => row.trim().split(/\s+/).map(i=>parseInt(i)));
	  window.arrayOfHeights = arrayOfHeights;
      //console.table(arrayOfHeights);
	  
      var solutionMatrix=[];
window.solutionMatrix = solutionMatrix;
      var checkMoves = function(x_,y_,ele){
	 var high = 0;
	 var path = '';
	 solutionMatrix[x_] = solutionMatrix[x_]||[];
	 if(!solutionMatrix[x_][y_]){
	  solutionMatrix[x_][y_] = {'ele':ele, 'path':ele,'high':0};
        //check up
		if(y_!=0&&ele>arrayOfHeights[x_][y_-1]){
			
			if(solutionMatrix[x_]&&solutionMatrix[x_][y_-1]!=undefined){
				
			}else{
			solutionMatrix[x_] = solutionMatrix[x_]||[];
			checkMoves(x_,y_-1,arrayOfHeights[x_][y_-1])
			
			}
			high = solutionMatrix[x_][y_-1].high+1;
			path = solutionMatrix[x_][y_-1].path;
		}
        //check down
		if(y_!=y-1&&ele>arrayOfHeights[x_][y_+1]){
		
			if(solutionMatrix[x_]&&solutionMatrix[x_][y_+1]!=undefined){
				
			}else{
			solutionMatrix[x_] = solutionMatrix[x_]||[];
			checkMoves(x_,y_+1,arrayOfHeights[x_][y_+1])
			
			}
			if(solutionMatrix[x_][y_+1].high+1>high){
			path = solutionMatrix[x_][y_+1].path;
			}
		high = Math.max(solutionMatrix[x_][y_+1].high+1,high);
		}
		//checkleft
		if(x_!=0&&ele>arrayOfHeights[x_-1][y_]){
		
			if(solutionMatrix[x_-1]&&solutionMatrix[x_-1][y_]!=undefined){
				
			}else{
			solutionMatrix[x_-1] = solutionMatrix[x_-1]||[];
			checkMoves(x_-1,y_,arrayOfHeights[x_-1][y_])
			
			}
				if(solutionMatrix[x_-1][y_].high+1>high){
			path = solutionMatrix[x_-1][y_].path;
			}
			high = Math.max(solutionMatrix[x_-1][y_].high+1,high);
		}
		//check right
		if(x_!=x-1&&ele>arrayOfHeights[x_+1][y_]){
				if(solutionMatrix[x_+1]&&solutionMatrix[x_+1][y_]!=undefined){
				
			}else{
			solutionMatrix[x_+1] = solutionMatrix[x_+1]||[];
			checkMoves(x_+1,y_,arrayOfHeights[x_+1][y_])
			
			}
				if(solutionMatrix[x_+1][y_].high+1>high){
			path = solutionMatrix[x_+1][y_].path;
			}
			high = Math.max(solutionMatrix[x_+1][y_].high+1,high);
		}		
		 solutionMatrix[x_][y_].high = high;
		  solutionMatrix[x_][y_].path = ele + '-'+path;
       }
	   }

	   var large = 0;
	   var p = '0-0-0';
	   var deep = 0;
      arrayOfHeights.forEach(function (arrayRow, x1){
      solutionMatrix[x1] = solutionMatrix[x1]||[];
      arrayRow.forEach(function (ele, y1){
	  
        checkMoves(x1,y1, ele);
		if(parseInt(solutionMatrix[x1][y1].high) >=	parseInt(large)){
		
		var e = parseInt(solutionMatrix[x1][y1].path.split('-')[0]) - parseInt(solutionMatrix[x1][y1].path.split('-')[solutionMatrix[x1][y1].path.split('-').length-2]);
		
		 if(parseInt(solutionMatrix[x1][y1].high) >	parseInt(large)){
		large = solutionMatrix[x1][y1].high;
		p = solutionMatrix[x1][y1].path;
		}else if(e>deep&&parseInt(solutionMatrix[x1][y1].high) ==	parseInt(large))
		p=solutionMatrix[x1][y1].path;
		}
		
	//	if( parseInt(solutionMatrix[x1][y1].high)  >	parseInt(large)
	//	||(parseInt(solutionMatrix[x1][y1].high)  ==	parseInt(large)||(parseInt(solutionMatrix[x1][y1].path.split('-')[0]) - parseInt(solutionMatrix[x1][y1].path.split('-')[solutionMatrix[x1][y1].path.split('-').length-2])>deep))){
	//
    //
	//	large = solutionMatrix[x1][y1].high;
	//	if(large >=15)
    // console.log(solutionMatrix[x1][y1])	
	//	var p2 =  solutionMatrix[x1][y1].path;
	//	if(parseInt(solutionMatrix[x1][y1].path.split('-')[0]) - parseInt(solutionMatrix[x1][y1].path.split('-')[solutionMatrix[x1][y1].path.split('-').length-2])>deep){
	//	console.log(solutionMatrix[x1][y1])
	//	p =  p2;
	//	deep = p.split('-')[0] - p.split('-')[p.split('-').length-2];
	//	}
	//	
	//	}
    

        //console.log(ele);
      });
      });
	  deep = p.split('-')[0] - p.split('-')[p.split('-').length-2];
	  $('#path').text(p);
	  $('#deep').text(deep);//we are taking from zero
		$('#length').text(large+1);
    }



    var ready = function () {
	 $('#datasource-text').val(`4 4 
4 8 7 3 
2 5 9 3 
6 3 2 5 
4 4 1 6`);
calculate($('#datasource-text').val());
      $('#geturl').click(function (event) {
	 $('#loading').show();
$('#geturl').prop('disabled',true);
         $.get($('#datasource').val()).then(function (data) {
           $('#datasource-text').val(data);
		   $('#geturl').prop('disabled',false);
		   $('#loading').hide();
          });
      });
	  $('#calculate').click(function (event) {
	  calculate( $('#datasource-text').val());
	  });
    }

    $(document).ready(ready);
  })();
</script>
	<script src="//script.opentracker.net/?site=www.ramireddy.in"></script>


</html>
